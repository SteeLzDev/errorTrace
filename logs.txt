package br.com.experian.buzz.infrastructure.integration.feign.client.antecipa;


import br.com.experian.antecipa.model.*;
import io.github.resilience4j.circuitbreaker.annotation.CircuitBreaker;
import org.springframework.cloud.openfeign.FeignClient;
import org.springframework.web.bind.annotation.*;

@CircuitBreaker(name = "AntecipaClient")
@FeignClient(name = "AntecipaClient", url = "${api.antecipa.uri}", configuration = FeignClient.class)
public interface AntecipaClient {

    @PostMapping(value = "/Originators/Anticipation/{SupplierDocument}/Simulate")
    SimulationAnticipationDto simulate (
            @PathVariable("SupplierDocument") String supplierDocument,
            @RequestBody SimulateAnticipationCommandViewModel command);


    @PostMapping(value = "/Originators/Anticipation/{SupplierDocument}/{CapitalSourceDocument}/Execute/{OfferId}")
    void execute (@PathVariable("SupplierDocument") String supplierDocument,
                  @PathVariable("CapitalSourceDocument") String capitalSourceDocument,
                  @PathVariable("OfferId") String OfferId);

    @GetMapping(value = "/Originators/Anticipation/{SupplierDocument}")
    AnticipationListDtoPagedCollectionItems getAnticipations(
            @PathVariable("SupplierDocument") String supplierDocument,
            @RequestParam(value = "CapitalSourceDocument", required = false) String capitalSourceDocument,
            @RequestParam(value = "AnticipationDate", required = false) String anticipationDate,
            @RequestParam(value = "StatusId", required = false) Integer statusId,
            @RequestParam(value = "PageId", required = false) String pageId,
            @RequestParam(value = "PageSize", required = false) Integer pageSize);

    @GetMapping(value = "/Originators/Anticipation/{SupplierDocument}/{id}")
    AnticipationDto getAnticipationById(
            @PathVariable("SupplierDocument") String suplierDocument,
            @PathVariable("Id") String id);

    @GetMapping(value = "/Originators/Anticipation/CapitalSources/{CapitalSourceDocument}/Suppliers/{SupplierDocument}")
    SupplierRegistrationDto getSupplier(
            @PathVariable("CapitalSourceDocument") String capitalSourceDocument,
            @PathVariable("SupplierDocument") String supplierDocument);

    @PostMapping(value = "/Originators/Anticipation/Suppliers")
    BasicResultDto addSupplier(@RequestBody SupplierAddCommandViewModel command);

}
