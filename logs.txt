private AnticipationHistoryItemTO convertToAnticipationHistoryItem(AntecipaAnticipationCardReceivableListDto externalItem) {
        AnticipationHistoryItemTO item = new AnticipationHistoryItemTO();

        if (externalItem.getId() != null && externalItem.getId().isPresent()) {
            item.setId(String.valueOf(externalItem.getId().get()));
        }
        if (externalItem.getStatusId() != null) {
            HistoryStatus mappedStatus = HistoryStatusMapping.mapFromExternalStatusId(externalItem.getStatusId());
            item.setStatus(mappedStatus.name());
        }

        if (externalItem.getCreatedAt() != null) {
            item.setCreatedAt(externalItem.getCreatedAt().toString());
        }
        if (externalItem.getStatusId() != null) {
            String mappedStatus = String.valueOf(HistoryStatusMapping.mapFromExternalStatusId(externalItem.getStatusId()));
            item.setStatus(mappedStatus);
            item.setStatusId(getStatusIdFromMappedStatus(mappedStatus));
        }
        if (externalItem.getSelectedAmount() != null) {
            item.selectedAmount(BigDecimal.valueOf(externalItem.getSelectedAmount()));
        }
        if (externalItem.getReceivedAmount() != null) {
            item.setReceivedAmount(BigDecimal.valueOf(externalItem.getReceivedAmount()));
        }
        if (externalItem.getAnticipatedOn() != null && externalItem.getAnticipatedOn().isPresent()) {
            LocalDateTime ldt = parseToLocalDate(externalItem.getAnticipatedOn().get());
            if (ldt != null) item.setAnticipatedOn(ldt);
        }
        if (externalItem.getPaymentDate() != null && externalItem.getPaymentDate().isPresent()) {
            LocalDateTime ldt = parseToLocalDate(externalItem.getPaymentDate().get());
            if (ldt != null) item.setPaymentDate(ldt);
        }
        if (externalItem.getEffectiveRate() != null) {
            item.setEffectiveRate(BigDecimal.valueOf(externalItem.getEffectiveRate()));
        }

        if (externalItem.getAnticipatedDiscount() != null) {
            item.setAnticipatedDiscount(BigDecimal.valueOf(externalItem.getAnticipatedDiscount()));
        }

        item.setAccreditingInstitution(createAccreditingInstitution());
        item.setCapitalSource(createCapitalSource());
        item.setSupplier(createSupplier());

        return item;
    }
