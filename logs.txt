Rodrigues, Danilo commented on a fileYesterday
src/main/java/br/com/experian/anticipation/application/rest/ReceivablesController.java
        Optional<ReceivableResponseDto> receivablesOptional = receivablesService.getReceivables(supplierDocument, pageLimit, pageOffset);
        if (receivablesOptional.isEmpty()) {
            return ResponseEntity.ok(createEmptyGroupedResponseTO());
        }
        ReceivablesPageDto receivablesPageDto = receivablesOptional.get().getReceivables();
​
        ReceivableGroupedResponseTO response = ReceivablesAdapter.toGroupedResponseTO(receivablesPageDto);
        return ResponseEntity.ok(response);
    }
​
    private String extractSupplierDocumentFromToken() {
        try {
            UserAccount userAccount = ((ReceivablesServiceImpl) receivablesService)
                    .getUserAccountWithBusinessInfo();
            if (userAccount != null && userAccount.getDocument() != null && userAccount.getDocument().isBlank()) {
                return userAccount.getDocument().trim();
            }
            throw new IllegalArgumentException("User document not found in token");
        } catch (Exception e) {
            throw new IllegalArgumentException("Failed do extract supplier document from user token: " + e.getMessage());
        }

Rodrigues, Danilo
Yesterday

New
Remover esse método e todas as dependências dele. Utilize o método 'getStatus' da classe 'OnboardingServiceImpl' como uma referência de como implementar e pegar o CNPJ do um usuário logado.

Reply

Resolve


